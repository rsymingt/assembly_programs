DUART	EQU	$C001
SRA	EQU	2
TBA	EQU	6

	ORG	$8000
MESSAGE	DC.B	'HELLO',$00

	ORG	$9000
START	LEA	DUART,A0
	LEA	MESSAGE,A1
	JSR	PRINT
	TRAP	#14
	

PRINT	LINK	A6,#0
	MOVEM.L	D0,-(SP)
PRINT2  CLR.L	D0	

	MOVE.B	(A1)+,D0
	BEQ	ENDP
	JSR	PRINTCHAR
	BRA	PRINT2
	
ENDP	MOVEM.L	(SP)+,D0
	UNLK	A6
	RTS

PRINTCHAR
	MOVEM.L	D0,-(SP)

CHECK	MOVE.B	SRA(A0),D7
	ANDI.B	#4,D7
	BEQ	CHECK
	MOVE.B	D0,TBA(A0)

	MOVEM.L	(SP)+,D0
	RTS

	END	START